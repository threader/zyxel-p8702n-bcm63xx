<script language="javascript">
var ipAddress = '<%ejGet(ethIpAddress)%>';
var subnetMask = '<%ejGet(ethSubnetMask)%>';
<!-- hide
function btnSave()
{
   with (document.forms[0]) {
      if (isValidIpAddress(TrustDomainIP.value) == false && isValidIpAddress6(TrustDomainIP.value)==false)
      {
		hciAlert(MLG_Makestring("<%ejGetML(MLG_Maintenance_LogsSetting_AlertMsg_Str29)%>", TrustDomainIP.value), 2);
         return;
      }
      var tempStr ='<%ejGet(TrustDomainIP)%>';
      var iplist = tempStr.split('@');
	//  var lanAddress_exist=false;
      for (i=0; i<iplist.length; i++)
      {  //check the repeat IP address
         if ((TrustDomainIP.value) == iplist[i])
         {
			hciAlert(MLG_Makestring("<%ejGetML(MLG_Maintenance_Trust_Domain_Alert_str1)%>", TrustDomainIP.value), 2);
            return;
         }		 
	//	 if (ipAddress + '/' + subnetMask  == iplist[i]) { 
	//	   lanAddress_exist=true;		 
	//	 }
      }
	  
      httpLan.value = (httpLan.value == 1 ? 2:0);
      httpWan.value = (httpWan.value == 1 ? 2:0);

      httpsLan.value = (httpsLan.value == 1 ? 2:0);
      httpsWan.value = (httpsWan.value == 1 ? 2:0);

      sshLan.value = (sshLan.value == 1 ? 2:0);
      sshWan.value = (sshWan.value == 1 ? 2:0);

      telnetLan.value = (telnetLan.value == 1 ? 2:0);
      telnetWan.value = (telnetWan.value == 1 ? 2:0);

      ftpLan.value = (ftpLan.value == 1 ? 2:0);
      ftpWan.value = (ftpWan.value == 1 ? 2:0);
	  
      sessionKey.value = mainFrame.gblsessionKey;
      TrustDomainIP.value = tempStr + TrustDomainIP.value + '@';
	//  if(lanAddress_exist == false) {
	//	TrustDomainIP.value = ipAddress + '/' + subnetMask + '@' + TrustDomainIP.value ;
	//  }
      submit();

      $('.ui-dialog-titlebar-close').trigger('click');
      $.openLoadingMask(1);
   }
   return;
}

var db = $('.popup_frame').parents('.dialogContener'); 
var OkBtn = db.parents('.ui-dialog').find('.ui-dialog-buttonpane').children('Button:nth-child(2)');
OkBtn.click(function(){ btnSave(); });


// done hiding -->
</script>
<form name="control" id="control" action="/pages/tabFW/remoteMGMT-remoteMGMT.cgi" method="post" target="mainFrame">
<input name="sessionKey" type="HIDDEN" id="sessionKey" value="" />
<input name="httpLan" type="HIDDEN" id="httpLan" value="<%ejGet(httpLan)%>" />
<input name="httpWan" type="HIDDEN" id="httpWan" value="<%ejGet(httpWan)%>" />
<input name="httpPort" type="HIDDEN" id="httpPort" value="<%ejGet(httpPort)%>" />
<input name="httpsLan" type="HIDDEN" id="httpsLan" value="<%ejGet(httpsLan)%>" />
<input name="httpsWan" type="HIDDEN" id="httpsWan" value="<%ejGet(httpsWan)%>" />
<input name="httpsPort" type="HIDDEN" id="httpsPort" value="<%ejGet(httpsPort)%>" />
<input name="sshLan" type="HIDDEN" id="sshLan" value="<%ejGet(sshLan)%>" />
<input name="sshWan" type="HIDDEN" id="sshWan" value="<%ejGet(sshWan)%>" />
<input name="sshPort" type="HIDDEN" id="sshPort" value="<%ejGet(sshPort)%>" />
<input name="telnetLan" type="HIDDEN" id="telnetLan" value="<%ejGet(telnetLan)%>" />
<input name="telnetWan" type="HIDDEN" id="telnetWan" value="<%ejGet(telnetWan)%>" />
<input name="telnetPort" type="HIDDEN" id="telnetPort" value="<%ejGet(telnetPort)%>" />
<input name="ftpLan" type="HIDDEN" id="ftpLan" value="<%ejGet(ftpLan)%>" />
<input name="ftpWan" type="HIDDEN" id="ftpWan" value="<%ejGet(ftpWan)%>" />
<input name="ftpPort" type="HIDDEN" id="ftpPort" value="<%ejGet(ftpPort)%>" />
<div class="popup_frame">
	<tr>
		<td align='center'> &nbsp;
				<br> 
			<table width="90%" border="0" cellpadding="0" cellspacing="0">
				<tr>
					<td> <%ejGetML(MLG_Maintenance_Add_Trust_Domain_Explain)%> 	</td>
				</tr><br>
			</table> 
			<table width="90%" border="0" cellpadding="0" cellspacing="0">
				<tr> 
					<td width="80"><%ejGetML(MLG_Common_IPAddress)%>:</td> 
					<td><input name="TrustDomainIP" type="text" size="40" />[/<%ejGetML(MLG_Maintenance_Remote_Str)%>]</td>
				</tr><br>
			</table>
		</td>
	</tr>
</div>
</form>
